# CollabCanvas - Architecture Document

**Author:** xvanov  
**Date:** 2025-01-27  
**Version:** 2.0  
**Generated by:** BMAD Decision Architecture Workflow v1.3.2

---

## Executive Summary

CollabCanvas uses a React 19 SPA with Vite, Firebase BaaS, and Konva.js for real-time collaborative canvas rendering. The architecture supports four-view navigation (Scope | Time | Space | Money), multi-project management, and performance-critical canvas operations requiring 60 FPS with 100+ objects. All external APIs route through Firebase Cloud Functions for security and caching.

---

## Decision Summary

| Category | Decision | Version | Affects Epics | Rationale |
| -------- | -------- | ------- | ------------- | --------- |
| **Routing** | React Router (react-router-dom) | Latest stable | Epic 1 (Four-view navigation) | Deep linking, browser history, URL-based navigation |
| **Project Structure** | Separate projects collection with user references | N/A | Epic 1 (Project management) | Supports sharing, clear ownership, efficient queries |
| **State Management** | Hybrid: Project store + View stores | Zustand ^5.0.8 | All epics | Separation of concerns, maintainability |
| **API Integration** | Cloud Functions for all external APIs | Firebase Functions ^4.8.0 | Epic 1, Epic 4 | Secure API keys, server-side caching, rate limiting |
| **Performance Optimization** | Canvas rendering optimizations (object culling, viewport, batching) | N/A | Epic 1 (Performance fixes) | Critical for 60 FPS with 100+ objects |
| **Real-time Collaboration** | Extend RTDB presence with currentView field | Firebase RTDB ^12.4.0 | Epic 1 (Four-view navigation) | Track user presence per view |
| **Error Handling** | Centralized error handler with user feedback | N/A | All epics | Consistent error handling, better UX |
| **Logging** | Structured logging with levels (DEBUG, INFO, WARN, ERROR) | N/A | All epics | Better debugging and monitoring |
| **Date/Time Handling** | UTC storage, local display, ISO 8601 format | N/A | All epics | Consistent timezone handling |
| **Authentication** | Firebase Auth with Google OAuth | Firebase Auth ^12.4.0 | Epic 1 | Secure, simple authentication |
| **API Response Format** | Standardized wrapper `{success, data?, error?}` | N/A | All epics | Consistent error handling, type safety |
| **Scope View Data** | Firestore structured data (items array) | Firestore ^12.4.0 | Epic 1 | Easy querying, real-time sync |
| **Time View Data** | Firestore CPM document (tasks array) | Firestore ^12.4.0 | Epic 1, Epic 3 | Store CPM tasks with dependencies |
| **Money View Data** | Firestore BOM document (matches current interface) | Firestore ^12.4.0 | Epic 1, Epic 4 | Consistent with existing BOM structure |

---

## Project Structure

```
collabcanvas/
├── src/
│   ├── main.tsx                    # Entry point - React app initialization
│   ├── App.tsx                      # Root component - Auth guard and routing
│   ├── App.css                      # Global app styles
│   ├── index.css                    # Base CSS styles
│   │
│   ├── pages/                       # Page-level components
│   │   ├── Login.tsx               # Login page (Google OAuth)
│   │   ├── Dashboard.tsx            # Project dashboard (home page)
│   │   └── Project.tsx             # Project page with four-view navigation
│   │
│   ├── components/                  # Reusable UI components
│   │   ├── canvas/                 # Canvas-related components
│   │   │   ├── Canvas.tsx          # Main Konva canvas component
│   │   │   ├── Shape.tsx           # Shape rendering component
│   │   │   ├── PolylineTool.tsx    # Polyline drawing tool
│   │   │   ├── PolygonTool.tsx     # Polygon drawing tool
│   │   │   └── ...
│   │   ├── scope/                  # Scope view components
│   │   │   ├── ScopeView.tsx       # Scope view container
│   │   │   ├── ScopeUpload.tsx     # CSV upload component
│   │   │   └── ScopeDisplay.tsx   # Scope content display
│   │   ├── time/                   # Time view components
│   │   │   ├── TimeView.tsx        # Time view container
│   │   │   ├── CPMGraph.tsx        # Critical Path visualization
│   │   │   └── TaskNode.tsx        # Task node component
│   │   ├── money/                  # Money view components
│   │   │   ├── MoneyView.tsx       # Money view container
│   │   │   ├── BOMTable.tsx        # Bill of Materials table
│   │   │   ├── PriceDisplay.tsx    # Price display component
│   │   │   └── EstimateExport.tsx  # Export functionality
│   │   ├── shared/                 # Shared components
│   │   │   ├── Toolbar.tsx         # Top navigation toolbar
│   │   │   ├── LayersPanel.tsx     # Layer management panel
│   │   │   ├── AIChat.tsx          # AI chat interface (context-aware)
│   │   │   └── ...
│   │   └── ...
│   │
│   ├── store/                       # Zustand state stores
│   │   ├── projectStore.ts          # Project management state
│   │   ├── canvasStore.ts          # Space view state (existing)
│   │   ├── scopeStore.ts           # Scope view state
│   │   ├── timeStore.ts            # Time view state (CPM)
│   │   └── moneyStore.ts           # Money view state (BOM)
│   │
│   ├── services/                    # Firebase services and business logic
│   │   ├── firebase.ts             # Firebase initialization
│   │   ├── firestore.ts            # Firestore operations
│   │   ├── rtdb.ts                 # Realtime Database operations
│   │   ├── storage.ts              # Storage operations
│   │   ├── projectService.ts       # Project CRUD operations
│   │   ├── scopeService.ts         # Scope data operations
│   │   ├── cpmService.ts          # CPM data operations
│   │   ├── bomService.ts          # BOM data operations
│   │   ├── aiService.ts            # AI command processing
│   │   ├── pricingService.ts       # Price fetching
│   │   └── ...
│   │
│   ├── hooks/                       # Custom React hooks
│   │   ├── useAuth.ts              # Authentication hook
│   │   ├── useProjects.ts          # Project management hook
│   │   ├── useScope.ts             # Scope view hook
│   │   ├── useCPM.ts               # CPM hook
│   │   ├── useBOM.ts               # BOM hook
│   │   ├── useShapes.ts            # Shape operations hook
│   │   ├── useLayers.ts            # Layer operations hook
│   │   └── ...
│   │
│   ├── types/                       # TypeScript type definitions
│   │   ├── types.ts                # Core types (Shape, Layer, etc.)
│   │   ├── project.ts              # Project types
│   │   ├── scope.ts                # Scope types
│   │   ├── cpm.ts                  # CPM types
│   │   ├── bom.ts                  # BOM types
│   │   └── ...
│   │
│   ├── utils/                       # Utility functions
│   │   ├── viewport.ts             # Viewport calculations
│   │   ├── throttle.ts             # Throttle/debounce utilities
│   │   ├── colors.ts               # Color utilities
│   │   ├── errorHandler.ts         # Centralized error handling
│   │   └── logger.ts               # Structured logging
│   │
│   └── test/                        # Test utilities
│       ├── setup.ts                 # Test setup
│       └── mocks/                  # Mock implementations
│
├── functions/                       # Firebase Cloud Functions
│   ├── src/
│   │   ├── index.ts               # Functions entry point
│   │   ├── aiCommand.ts           # AI command processing
│   │   ├── pricing.ts             # Home Depot pricing
│   │   └── materialEstimateCommand.ts # Material estimation
│   └── package.json
│
├── public/                          # Static assets
├── dist/                            # Production build output
├── package.json
├── vite.config.ts
├── tsconfig.json
└── firebase.json
```

---

## Epic to Architecture Mapping

### Epic 1: MVP - Minimum Viable Product

**Architecture Components:**

- **Home Page & Project Dashboard**
  - Component: `pages/Dashboard.tsx`
  - Store: `store/projectStore.ts`
  - Service: `services/projectService.ts`
  - Firestore: `/projects/{projectId}` collection
  - Features: Project CRUD, status tracking, sharing

- **Four-View Navigation**
  - Routing: React Router with nested routes
  - Routes: `/projects/:projectId/scope`, `/projects/:projectId/time`, `/projects/:projectId/space`, `/projects/:projectId/money`
  - Component: `pages/Project.tsx` with tab navigation
  - Presence: RTDB `/presence/{userId}` with `currentView` field

- **Scope View**
  - Component: `components/scope/ScopeView.tsx`
  - Store: `store/scopeStore.ts`
  - Service: `services/scopeService.ts`
  - Firestore: `/projects/{projectId}/scope` document

- **Time View (CPM)**
  - Component: `components/time/TimeView.tsx`, `components/time/CPMGraph.tsx`
  - Store: `store/timeStore.ts`
  - Service: `services/cpmService.ts`
  - Firestore: `/projects/{projectId}/cpm` document

- **Money View (BOM)**
  - Component: `components/money/MoneyView.tsx`, `components/money/BOMTable.tsx`
  - Store: `store/moneyStore.ts`
  - Service: `services/bomService.ts`
  - Firestore: `/projects/{projectId}/bom` document
  - Cloud Function: `getHomeDepotPrice` for pricing

- **Space View (Canvas)**
  - Component: `components/canvas/Canvas.tsx` (existing)
  - Store: `store/canvasStore.ts` (existing)
  - Service: `services/firestore.ts` (existing)
  - Firestore: `/projects/{projectId}/boards/{boardId}/shapes/{shapeId}`

- **Performance Optimizations**
  - Object culling: Only render visible shapes
  - Viewport optimization: Only update visible area
  - Batch updates: Group multiple updates

### Epic 2: Phase 2 - Advanced Annotation Tools

**Architecture Components:**

- **Project Isolation (Story 2.1)**: Canvas data (shapes, layers, board state) is now project-scoped
  - Firestore paths: `/projects/{projectId}/shapes/{shapeId}`, `/projects/{projectId}/layers/{layerId}`, `/projects/{projectId}/board/data`
  - Hooks (`useShapes`, `useLayers`) accept `projectId` parameter and use project-scoped stores via `useScopedCanvasStore`
  - Components extract `projectId` from route params (`useParams`) and pass to hooks
  - Store isolation: `projectCanvasStore.ts` provides isolated Zustand stores per project via `getProjectCanvasStore(projectId)`
  - Security: Firestore rules enforce project-level access control (owner/collaborator checks)
  - Subscription cleanup: Hooks properly unsubscribe when `projectId` changes to prevent memory leaks
- Counter Tool: New shape type in `canvasStore.ts`
- Multi-Floor Support: Extend Firestore structure with `floors` array

### Epic 3: Phase 3 - Construction Project Bidding Engine

**Architecture Components:**

- Enhanced CPM: Extend `timeStore.ts` with labor hours
- Bid Customization: Extend `moneyStore.ts` with bid parameters
- Cloud Function: Labor rate calculations

### Epic 4: Phase 4 - Multi-Supplier Cost Optimization

**Architecture Components:**

- Cloud Functions: Additional supplier APIs (Lowe's, Amazon, Wayfair)
- Service: `services/pricingService.ts` extended for multi-supplier
- Store: `moneyStore.ts` extended for optimization state

---

## Technology Stack Details

### Core Technologies

| Technology | Version | Purpose |
| ---------- | ------- | ------- |
| **React** | ^19.2.0 | UI framework |
| **TypeScript** | ~5.9.3 | Type safety |
| **Vite** | ^7.1.7 | Build tool |
| **React Router** | Latest stable | Client-side routing |
| **Konva** | ^10.0.2 | Canvas rendering |
| **react-konva** | ^19.0.10 | React bindings for Konva |
| **Zustand** | ^5.0.8 | State management |
| **Tailwind CSS** | ^3.4.18 | Styling |
| **Firebase** | ^12.4.0 | Backend platform |
| **Firebase Auth** | ^12.4.0 | Authentication |
| **Cloud Firestore** | ^12.4.0 | Persistent database |
| **Realtime Database** | ^12.4.0 | Ephemeral real-time data |
| **Cloud Functions** | ^4.8.0 | Serverless functions |
| **Firebase Storage** | ^12.4.0 | File storage |

### Integration Points

**Client ↔ Firebase Services:**
- Firestore: Persistent data (projects, shapes, layers, scope, CPM, BOM)
- Realtime Database: Presence, locks, cursors
- Cloud Functions: AI commands, pricing, material estimation
- Storage: Background images, file uploads
- Auth: Google OAuth

**External APIs (via Cloud Functions):**
- OpenAI API: AI command processing
- SerpAPI: Home Depot pricing
- Future: Lowe's, Amazon, Wayfair APIs

---

## Implementation Patterns

### Naming Patterns

**Files:**
- Components: `PascalCase.tsx` (e.g., `ScopeView.tsx`, `BOMTable.tsx`)
- Services: `camelCase.ts` (e.g., `scopeService.ts`, `bomService.ts`)
- Hooks: `useCamelCase.ts` (e.g., `useScope.ts`, `useBOM.ts`)
- Stores: `camelCaseStore.ts` (e.g., `scopeStore.ts`, `moneyStore.ts`)
- Types: `camelCase.ts` (e.g., `project.ts`, `cpm.ts`)

**Components:**
- Component names: `PascalCase` (e.g., `ScopeView`, `BOMTable`, `CPMGraph`)

**Functions/Variables:**
- `camelCase` for functions and variables
- `UPPER_CASE` for constants

**Firestore Collections:**
- `camelCase` plural (e.g., `projects`, `shapes`, `layers`)

**Firestore Documents:**
- Document IDs: `camelCase` or UUIDs

### Structure Patterns

**Component Organization:**
- One component per file
- Co-located tests (`*.test.tsx`)
- Group by feature/domain (canvas/, scope/, time/, money/, shared/)

**Service Organization:**
- One service per file
- Related services in subdirectories (e.g., `calculators/`)
- Test files co-located (`*.test.ts`)

**Store Organization:**
- One store per file
- Store files in `src/store/`
- Store hooks: `useStoreName`

**Route Organization:**
- Page components in `src/pages/`
- Nested routes: `/projects/:projectId/:view`
- Route components in respective feature directories

### Format Patterns

**API Responses:**
```typescript
{
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
  };
}
```

**Firestore Documents:**
- Use `serverTimestamp()` for `createdAt`/`updatedAt`
- Include `createdBy`/`updatedBy` (userId)
- Include `clientUpdatedAt` for conflict resolution

**Date Format in JSON:**
- ISO 8601 strings (e.g., `"2025-01-27T10:30:00Z"`)

**Error Format:**
```typescript
{
  code: string;      // Error code (e.g., "PRICE_FETCH_FAILED")
  message: string;    // User-friendly message
  details?: unknown;  // Additional error details
}
```

### Communication Patterns

**State Updates:**
- Zustand stores for state management
- Actions: `camelCase` (e.g., `createProject`, `updateBOM`)
- Selectors: `useStore((state) => state.property)`

**Component Communication:**
- Props: Parent-to-child data flow
- Store: Shared state via Zustand
- Callbacks: Child-to-parent events
- Refs: Imperative access (canvas operations)

**Real-time Sync:**
- Firestore: Persistent data subscriptions
- RTDB: Ephemeral data subscriptions
- Presence: RTDB `/presence/{userId}` with `currentView` field

### Lifecycle Patterns

**Loading States:**
- Skeleton loaders for initial load
- Spinner for async operations
- Optimistic UI updates where possible

**Error Recovery:**
- Retry logic for transient errors
- Offline queue for network failures
- User feedback via toast notifications

**Data Fetching:**
- Subscribe to Firestore collections/documents
- Cleanup subscriptions on unmount
- Debounce/throttle frequent updates

### Location Patterns

**URL Structure:**
- `/` - Dashboard (project list)
- `/projects/:projectId/scope` - Scope view
- `/projects/:projectId/time` - Time view
- `/projects/:projectId/space` - Space view
- `/projects/:projectId/money` - Money view

**Asset Organization:**
- Static assets: `public/`
- Images: `public/images/`
- Icons: Component library (shadcn/ui)

**Config Placement:**
- Firebase config: `src/services/firebase.ts`
- App config: Environment variables

### Consistency Patterns

**UI Date Formats:**
- Display: Local timezone, formatted (e.g., "Jan 27, 2025")
- Storage: UTC, ISO 8601

**Logging Format:**
```typescript
{
  level: 'DEBUG' | 'INFO' | 'WARN' | 'ERROR';
  message: string;
  context?: Record<string, unknown>;
  timestamp: number;
}
```

**User-Facing Errors:**
- Clear, actionable messages
- No technical jargon
- Toast notifications for errors

---

## Consistency Rules

### Naming Conventions

**Components:** `PascalCase`  
**Files:** Match component/export name  
**Functions:** `camelCase`  
**Constants:** `UPPER_CASE`  
**Firestore Collections:** `camelCase` plural  
**Firestore Documents:** `camelCase` or UUIDs

### Code Organization

**Components:** One per file, co-located tests, grouped by feature  
**Services:** One per file, co-located tests  
**Stores:** One per file, in `src/store/`  
**Types:** Domain-specific files in `src/types/`

### Error Handling

**Pattern:** Centralized error handler with user feedback  
**Format:** `{code, message, details?}`  
**Display:** Toast notifications for user-facing errors  
**Logging:** Structured logging with levels

### Logging Strategy

**Levels:** DEBUG, INFO, WARN, ERROR  
**Format:** Structured JSON with level, message, context, timestamp  
**Location:** Console in dev, Firebase Analytics/Logging in prod

---

## Data Architecture

### Firestore Collections

**Projects Collection:**
```
/projects/{projectId}
  - name: string
  - description: string
  - status: 'estimating' | 'bid-ready' | 'bid-lost' | 'executing' | 'completed-profitable' | 'completed-unprofitable' | 'completed-unknown'
  - ownerId: string (userId)
  - collaborators: Array<{userId: string, role: 'editor' | 'viewer'}>
  - createdAt: serverTimestamp
  - updatedAt: serverTimestamp
  - createdBy: string (userId)
  - updatedBy: string (userId)
```

**Scope Document:**
```
/projects/{projectId}/scope
  - items: Array<{scope: string, description: string}>
  - uploadedAt: serverTimestamp
  - uploadedBy: string (userId)
```

**CPM Document:**
```
/projects/{projectId}/cpm
  - tasks: Array<{
      id: string;
      name: string;
      duration: number; // hours or days
      dependencies: string[]; // task IDs
      laborHours?: number;
      startDate?: timestamp;
      endDate?: timestamp;
    }>
  - generatedAt: serverTimestamp
  - generatedBy: string (userId)
```

**BOM Document:**
```
/projects/{projectId}/bom
  - calculations: Array<MaterialCalculation>
  - totalCost: number
  - margin: number
  - lastUpdated: serverTimestamp
```

**Boards Collection (existing):**
```
/projects/{projectId}/boards/{boardId}
  - /shapes/{shapeId}
  - /layers/{layerId}
  - board state document
```

### Realtime Database Structure

**Presence:**
```
/presence/{userId}
  - userId: string
  - name: string
  - color: string
  - currentView: 'scope' | 'time' | 'space' | 'money'
  - cursor: {x: number, y: number}
  - lastSeen: timestamp
  - isActive: boolean
```

**Locks:**
```
/locks/{shapeId}
  - userId: string
  - userName: string
  - lockedAt: timestamp
```

---

## API Contracts

### Cloud Functions

**AI Command:**
```typescript
aiCommand({commandText: string, userId: string}): Promise<{
  success: boolean;
  message: string;
  executedCommands: AICommand[];
  error?: string;
}>
```

**Get Home Depot Price:**
```typescript
getHomeDepotPrice({request: {
  materialName: string;
  unit?: string;
  storeNumber?: string;
}}): Promise<{
  success: boolean;
  priceUSD: number | null;
  link: string | null;
}>
```

**Material Estimate:**
```typescript
materialEstimateCommand({...}): Promise<{
  success: boolean;
  bom: BillOfMaterials;
  error?: string;
}>
```

### Service Layer APIs

**Project Service:**
- `createProject(name, description): Promise<Project>`
- `getProject(projectId): Promise<Project>`
- `updateProject(projectId, updates): Promise<void>`
- `deleteProject(projectId): Promise<void>`
- `getUserProjects(userId): Promise<Project[]>`

**Scope Service:**
- `uploadScope(projectId, items): Promise<void>`
- `getScope(projectId): Promise<Scope>`
- `updateScope(projectId, items): Promise<void>`

**CPM Service:**
- `generateCPM(projectId, tasks): Promise<void>`
- `getCPM(projectId): Promise<CPM>`
- `updateCPM(projectId, tasks): Promise<void>`

**BOM Service:**
- `generateBOM(projectId): Promise<BillOfMaterials>`
- `getBOM(projectId): Promise<BillOfMaterials>`
- `updateBOM(projectId, bom): Promise<void>`
- `fetchPrices(bom): Promise<BillOfMaterials>`

---

## Security Architecture

### Authentication

**Provider:** Firebase Auth with Google OAuth  
**Flow:** Popup-based OAuth flow  
**Session:** Managed by Firebase Auth SDK

### Authorization

**Firestore Rules:**
- Authenticated users only
- Project access: Owner or collaborator
- Write access: Owner or editor role
- Read access: Owner, editor, or viewer role

**Realtime Database Rules:**
- Authenticated users only
- Presence: User can only write own presence
- Locks: User can acquire if not locked or owns lock

**Storage Rules:**
- Authenticated users only
- Project files: Owner or collaborator access

### Data Validation

**Client-side:** TypeScript types, service validation  
**Server-side:** Firestore security rules, RTDB rules  
**Shape Validation:** Type-specific property validation

---

## Performance Considerations

### Canvas Rendering Optimizations

**Object Culling:**
- Only render shapes within viewport
- Skip off-screen shapes entirely

**Viewport Optimization:**
- Only update visible area
- Batch viewport calculations

**Batch Updates:**
- Group multiple shape updates
- Single render cycle per batch

**Existing Optimizations:**
- Konva layers separation
- Shape memoization (React.memo)
- Imperative updates via refs
- RAF-based updates
- Map-based storage (O(1) lookups)
- Throttled writes

### State Optimization

**Selective Subscriptions:**
- Components subscribe to specific slices
- Avoid full store subscriptions

**Incremental Updates:**
- Only changed items processed
- Avoid full re-renders

### Network Optimization

**Incremental Sync:**
- Only changed documents synced
- Avoid full collection reads

**Optimistic UI Updates:**
- Immediate UI feedback
- Sync in background

**Offline Support:**
- Queue operations when offline
- Sync on reconnect

---

## Deployment Architecture

### Build Process

1. **TypeScript Compilation:** `tsc -b`
2. **Vite Bundling:** Code splitting, minification
3. **Asset Optimization:** CSS processing, asset hashing
4. **Output:** `dist/` directory

### Hosting

**Platform:** Firebase Hosting  
**CDN:** Global CDN for static assets  
**SPA Routing:** All routes redirect to `index.html`  
**Asset Caching:** Long-term caching for static assets

### Cloud Functions

**Runtime:** Node.js 18  
**Region:** us-central1  
**Deployment:** Separate from hosting  
**Dependencies:** OpenAI API, SerpAPI (Home Depot)

---

## Development Environment

### Prerequisites

- Node.js 18+
- npm (latest)
- Firebase CLI ^14.19.1
- Firebase account with project

### Setup Commands

```bash
# Install dependencies
npm install

# Start development server
npm run dev

# Run tests
npm test

# Build for production
npm run build

# Deploy to Firebase
npm run deploy

# Deploy Firestore rules
npm run deploy:rules
```

### Environment Variables

- Firebase config: Set in `src/services/firebase.ts`
- API keys: Stored as Firebase Functions secrets
- No client-side API keys exposed

---

## Architecture Decision Records (ADRs)

### ADR-1: React Router for Navigation

**Decision:** Use React Router (react-router-dom) for four-view navigation  
**Rationale:** Deep linking, browser history, URL-based navigation essential for multi-view application  
**Alternatives Considered:** Custom routing, conditional rendering  
**Status:** Accepted

### ADR-2: Hybrid State Management

**Decision:** Split Zustand stores by domain (project + view stores)  
**Rationale:** Separation of concerns, maintainability, focused stores  
**Alternatives Considered:** Single unified store, fully split stores  
**Status:** Accepted

### ADR-3: Cloud Functions for External APIs

**Decision:** Route all external APIs through Firebase Cloud Functions  
**Rationale:** Secure API keys, server-side caching, rate limiting, consistent pattern  
**Alternatives Considered:** Client-side API calls, hybrid approach  
**Status:** Accepted

### ADR-4: Canvas Rendering Optimizations

**Decision:** Implement object culling, viewport optimization, batch updates  
**Rationale:** Critical for 60 FPS performance with 100+ objects  
**Alternatives Considered:** No optimizations, different optimization strategies  
**Status:** Accepted

### ADR-5: Separate Projects Collection

**Decision:** Store projects in separate Firestore collection with user references  
**Rationale:** Supports sharing, clear ownership, efficient queries  
**Alternatives Considered:** Projects nested under users, single board approach  
**Status:** Accepted

---

_Generated by BMAD Decision Architecture Workflow v1.3.2_  
_Date: 2025-01-27_  
_For: xvanov_
